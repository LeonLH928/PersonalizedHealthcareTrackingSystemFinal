<Window x:Class="PersonalizedHealthcareTrackingSystemFinal.Views.SignUpWindow"
        x:Name="RootWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PersonalizedHealthcareTrackingSystemFinal.Helpers" xmlns:viewmodels="clr-namespace:PersonalizedHealthcareTrackingSystemFinal.ViewModels" d:DataContext="{d:DesignInstance Type=viewmodels:SignUpWindowViewModel}"
        mc:Ignorable="d"
        Title="Personalized Healthcare System | Sign Up" 
        Height="700" Width="500"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        Icon="/Resources/Logo/logo.ico"
        FontFamily="/PersonalizedHealthcareTrackingSystemFinal;component/Resources/Fonts/#Poppins">

    <Border Background="#11161F" CornerRadius="20" BorderThickness="1" BorderBrush="#333">
        <Grid>
            <ScrollViewer VerticalScrollBarVisibility="Auto" 
                         HorizontalScrollBarVisibility="Disabled"
                         Margin="0,50,0,0">
                <StackPanel VerticalAlignment="Top" 
                            HorizontalAlignment="Center" 
                            Width="400"
                            Margin="0,20,0,40">

                    <!-- Logo và Slogan -->
                    <Image Source="/Resources/Logo/icon.png" 
                           Width="80" Height="80" 
                           Margin="0,0,0,15"/>

                    <TextBlock Text="PERSONALIZED HEALTHCARE SYSTEM" 
                               Foreground="White" 
                               FontSize="16" 
                               FontWeight="Bold" 
                               HorizontalAlignment="Center" 
                               TextAlignment="Center" 
                               TextWrapping="Wrap"
                               Margin="0,0,0,5"/>

                    <TextBlock Text="Join Us to Control Your Health, Your Data" 
                               Foreground="{StaticResource TextGray}" 
                               FontSize="12" 
                               FontStyle="Italic"
                               HorizontalAlignment="Center" 
                               Margin="0,0,0,30"/>

                    <!-- Form Fields -->

                    <!-- Họ và Tên -->
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBox Grid.Column="0"
                                 Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource RoundedTextBoxStyle}" 
                                 Tag="First Name"
                                 Height="45" 
                                 Padding="12,10"/>

                        <TextBox Grid.Column="2"
                                 Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource RoundedTextBoxStyle}" 
                                 Tag="Last Name"
                                 Height="45" 
                                 Padding="12,10"/>
                    </Grid>

                    <!-- Email -->
                    <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource RoundedTextBoxStyle}" 
                             Tag="Email Address"
                             Height="45" 
                             Margin="0,0,0,15" 
                             Padding="12,10"/>

                    <!-- Phone Number -->
                    <TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource RoundedTextBoxStyle}" 
                             Tag="Phone Number"
                             Height="45" 
                             Margin="0,0,0,15" 
                             Padding="12,10"/>

                    <!-- Username -->
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource RoundedTextBoxStyle}" 
                             Tag="Username"
                             Height="45" 
                             Margin="0,0,0,15" 
                             Padding="12,10"/>

                    <!-- Password -->
                    <Grid Margin="0,0,0,15">
                        <PasswordBox x:Name="pwdBox"
                                     Style="{StaticResource RoundedPasswordBoxStyle}"
                                     Tag="Password"
                                     Height="45"
                                     Padding="12,10,40,10"
                                     PasswordChanged="pwdBox_PasswordChanged"/>

                        <TextBox x:Name="txtVisiblePassword"
                                 Style="{StaticResource RoundedTextBoxStyle}"
                                 Tag="Password"
                                 Height="45"
                                 Visibility="Collapsed"
                                 Padding="12,10,40,10"
                                 TextChanged="txtVisiblePassword_TextChanged"/>

                        <ToggleButton x:Name="btnToggleShowPassword"
                                      HorizontalAlignment="Right" 
                                      VerticalAlignment="Center"
                                      Width="30" Height="30" 
                                      Margin="0,0,10,0"
                                      Background="Transparent" 
                                      BorderThickness="0" 
                                      Cursor="Hand"
                                      Checked="ShowPassword_Checked" 
                                      Unchecked="ShowPassword_Unchecked">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Border Background="Transparent">
                                        <TextBlock x:Name="txtIcon" 
                                                   Text="👁" 
                                                   FontSize="14" 
                                                   Foreground="{StaticResource TextGray}" 
                                                   VerticalAlignment="Center" 
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="txtIcon" Property="Foreground" Value="{StaticResource PrimaryTeal}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="txtIcon" Property="Opacity" Value="0.8"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                    </Grid>

                    <!-- Confirm Password -->
                    <Grid Margin="0,0,0,15">
                        <PasswordBox x:Name="pwdConfirmBox"
                                     Style="{StaticResource RoundedPasswordBoxStyle}"
                                     Tag="Confirm Password"
                                     Height="45"
                                     Padding="12,10,40,10"
                                     PasswordChanged="pwdConfirmBox_PasswordChanged"/>

                        <TextBox x:Name="txtVisibleConfirmPassword"
                                 Style="{StaticResource RoundedTextBoxStyle}"
                                 Tag="Confirm Password"
                                 Height="45"
                                 Visibility="Collapsed"
                                 Padding="12,10,40,10"
                                 TextChanged="txtVisibleConfirmPassword_TextChanged"/>

                        <ToggleButton x:Name="btnToggleShowConfirmPassword"
                                      HorizontalAlignment="Right" 
                                      VerticalAlignment="Center"
                                      Width="30" Height="30" 
                                      Margin="0,0,10,0"
                                      Background="Transparent" 
                                      BorderThickness="0" 
                                      Cursor="Hand"
                                      Checked="ShowConfirmPassword_Checked" 
                                      Unchecked="ShowConfirmPassword_Unchecked">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Border Background="Transparent">
                                        <TextBlock x:Name="txtIcon" 
                                                   Text="👁" 
                                                   FontSize="14" 
                                                   Foreground="{StaticResource TextGray}" 
                                                   VerticalAlignment="Center" 
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="txtIcon" Property="Foreground" Value="{StaticResource PrimaryTeal}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="txtIcon" Property="Opacity" Value="0.8"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                    </Grid>

                    <!-- Role Selection -->
                    <TextBlock Text="Select Your Role" 
                               Foreground="{StaticResource TextGray}" 
                               FontSize="12" 
                               FontWeight="Medium"
                               Margin="0,0,0,10"/>

                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Patient -->
                        <RadioButton Grid.Column="0"
                                     GroupName="Role"
                                     Content="Patient"
                                     IsChecked="{Binding IsPatientSelected}"
                                     Style="{StaticResource RoleRadioButtonStyle}"/>

                        <!-- Doctor -->
                        <RadioButton Grid.Column="2"
                                     GroupName="Role"
                                     Content="Doctor"
                                     IsChecked="{Binding IsDoctorSelected}"
                                     Style="{StaticResource RoleRadioButtonStyle}"/>

                        <!-- Pharmacist -->
                        <RadioButton Grid.Column="4"
                                     GroupName="Role"
                                     Content="Pharmacist"
                                     IsChecked="{Binding IsPharmacistSelected}"
                                     Style="{StaticResource RoleRadioButtonStyle}"/>
                    </Grid>

                    <!-- Error Message -->
                    <TextBlock Text="{Binding ErrorMessage}"
                               Foreground="#E81123"
                               FontSize="12"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,15"
                               Visibility="{Binding HasError, Converter={StaticResource BoolToVisibilityConverter}}"/>

                    <!-- Sign Up Button -->
                    <Button Command="{Binding SignUpCommand}" 
                            Content="SIGN UP" 
                            Style="{StaticResource TealButtonStyle}" 
                            Height="45" 
                            Margin="0,0,0,20"/>

                    <!-- Back to Login -->
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Center">
                        <TextBlock Text="Already have an account? " 
                                   Foreground="White"
                                   FontSize="12"/>
                        <TextBlock Text="Log In" 
                                   Foreground="{StaticResource PrimaryTeal}"
                                   TextDecorations="Underline" 
                                   FontWeight="Bold" 
                                   FontSize="12"
                                   Cursor="Hand"
                                   MouseLeftButtonDown="LoginLink_Click"/>
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>

            <!-- Window Controls -->
            <StackPanel Orientation="Horizontal" 
                        VerticalAlignment="Top" 
                        HorizontalAlignment="Right" 
                        Margin="0,10,15,0">

                <Button Content="—" 
                        Style="{StaticResource WindowControlButtonStyle}"
                        Command="{Binding MinimizeAppCommand}"
                        CommandParameter="{Binding ElementName=RootWindow}"/>

                <Button Content="✕" 
                        Style="{StaticResource CloseButtonStyle}"
                        Command="{Binding CloseAppCommand}"
                        CommandParameter="{Binding ElementName=RootWindow}"/>
            </StackPanel>

        </Grid>
    </Border>
</Window>