<Page x:Class="PersonalizedHealthcareTrackingSystemFinal.Views.PatientView.PatientSetting"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:fa="http://schemas.fontawesome.io/icons/"
      mc:Ignorable="d" 
      d:DesignHeight="1000" d:DesignWidth="1100"
      Title="PatientSetting"
      FontFamily="Segoe UI"
      Background="#F1F5F9">

    <Page.Resources>
        
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="White" Padding="32" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,0,0,1">
            <TextBlock Text="Cài đặt tài khoản" FontSize="28" FontWeight="Bold" Foreground="{StaticResource DarkText}"/>
        </Border>

        <TabControl Grid.Row="1" TabStripPlacement="Left" Background="Transparent" BorderThickness="0" Margin="0,32,0,0" Padding="0">
            <TabControl.Resources>
                <Style TargetType="TabPanel">
                    <Setter Property="Margin" Value="32,0,40,0"/>
                    <Setter Property="Width" Value="240"/>
                </Style>
            </TabControl.Resources>

            <TabItem Style="{StaticResource SettingsTabItem}">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <fa:ImageAwesome Icon="User" Width="16" Height="16" Margin="0,0,12,0" Foreground="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Foreground}"/>
                        <TextBlock Text="Thông tin chung"/>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="0,0,32,32">
                    <StackPanel MaxWidth="800" HorizontalAlignment="Left">

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Ảnh đại diện" Style="{StaticResource CardTitleStyle}"/>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="80" Height="80" Stroke="White" StrokeThickness="3">
                                        <Ellipse.Fill>
                                            <SolidColorBrush Color="#cbd5e1"/>
                                        </Ellipse.Fill>
                                        <Ellipse.Effect>
                                            <DropShadowEffect BlurRadius="10" Opacity="0.1"/>
                                        </Ellipse.Effect>
                                    </Ellipse>

                                    <StackPanel Margin="24,0,0,0" VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                            <Button Content="📷 Tải ảnh mới lên" Style="{StaticResource BtnSecondary}" Padding="16,8" FontSize="13" Margin="0,0,12,0"/>
                                            <Button Content="Xóa ảnh hiện tại" Background="Transparent" Foreground="{StaticResource DangerColor}" 
                                                    BorderThickness="0" FontWeight="SemiBold" Cursor="Hand"/>
                                        </StackPanel>
                                        <TextBlock Text="Cho phép định dạng JPG, GIF hoặc PNG. Kích thước tối đa 2MB." 
                                                   FontSize="12" Foreground="{StaticResource SecondaryText}"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Thông tin cá nhân &amp; Y tế" Style="{StaticResource CardTitleStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="20"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="20"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Grid.Column="0">
                                        <TextBlock Text="Họ và tên đệm" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="Nguyễn Văn" Style="{StaticResource FormInput}" IsReadOnly="True" ToolTip="Liên hệ CSKH để thay đổi"/>
                                    </StackPanel>
                                    <StackPanel Grid.Row="0" Grid.Column="2">
                                        <TextBlock Text="Tên" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="A" Style="{StaticResource FormInput}" IsReadOnly="True"/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2" Grid.Column="0">
                                        <TextBlock Text="Ngày sinh" Style="{StaticResource FormLabel}"/>
                                        <DatePicker SelectedDate="1978-10-26" Padding="4" BorderBrush="{StaticResource BorderColor}" 
                                                    VerticalContentAlignment="Center" Height="42">
                                            <DatePicker.Resources>
                                                <Style TargetType="DatePickerTextBox">
                                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                </Style>
                                            </DatePicker.Resources>
                                        </DatePicker>
                                    </StackPanel>
                                    <StackPanel Grid.Row="2" Grid.Column="2">
                                        <TextBlock Text="Giới tính" Style="{StaticResource FormLabel}"/>
                                        <ComboBox SelectedIndex="0" Padding="12" BorderBrush="{StaticResource BorderColor}" Height="42" VerticalContentAlignment="Center">
                                            <ComboBoxItem Content="Nam"/>
                                            <ComboBoxItem Content="Nữ"/>
                                            <ComboBoxItem Content="Khác"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <StackPanel Grid.Row="4" Grid.Column="0">
                                        <TextBlock Text="Số thẻ BHYT" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="DN4790123456789" Style="{StaticResource FormInput}" 
                                                 IsReadOnly="True" FontFamily="Consolas" FontWeight="SemiBold"/>
                                        <TextBlock Text="Thông tin này được xác thực bởi bệnh viện." FontSize="12" Foreground="{StaticResource SecondaryText}" Margin="0,4,0,0"/>
                                    </StackPanel>
                                    <StackPanel Grid.Row="4" Grid.Column="2">
                                        <TextBlock Text="Nhóm máu" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="A+" Style="{StaticResource FormInput}" IsReadOnly="True"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Thông tin liên hệ" Style="{StaticResource CardTitleStyle}"/>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Số điện thoại (Đăng nhập)" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="0901234567" Style="{StaticResource FormInput}" IsReadOnly="True"/>
                                        <TextBlock Text="Thay đổi số điện thoại xác thực →" Foreground="{StaticResource PrimaryColor}" 
                                                   FontSize="13" Margin="0,6,0,0" Cursor="Hand" TextDecorations="Underline"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Địa chỉ Email" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="nguyenva@email.com" Style="{StaticResource FormInput}"/>
                                    </StackPanel>
                                </Grid>

                                <StackPanel Margin="0,0,0,32">
                                    <TextBlock Text="Địa chỉ hiện tại" Style="{StaticResource FormLabel}"/>
                                    <TextBox Text="Số 123, Đường ABC, Quận 1, TP.HCM" Style="{StaticResource FormInput}"/>
                                </StackPanel>

                                <Border BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,0,0" Padding="0,24,0,0">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="Hủy bỏ" Style="{StaticResource BtnSecondary}" Margin="0,0,12,0"/>
                                        <Button Content="Lưu thay đổi" Style="{StaticResource BtnPrimary}"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Style="{StaticResource SettingsTabItem}">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <fa:ImageAwesome Icon="Lock" Width="16" Height="16" Margin="0,0,12,0" Foreground="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Foreground}"/>
                        <TextBlock Text="Bảo mật &amp; Đăng nhập"/>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="0,0,32,32">
                    <StackPanel MaxWidth="800" HorizontalAlignment="Left">

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Đổi mật khẩu" Style="{StaticResource CardTitleStyle}"/>

                                <StackPanel Margin="0,0,0,20">
                                    <TextBlock Text="Mật khẩu hiện tại" Style="{StaticResource FormLabel}"/>
                                    <Grid>
                                        <PasswordBox Style="{StaticResource FormPassword}" Height="44" VerticalContentAlignment="Center" PasswordChar="•"/>
                                        <TextBlock Text="👁️" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,12,0" 
                                                   Foreground="{StaticResource SecondaryText}" Cursor="Hand"/>
                                    </Grid>
                                </StackPanel>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Mật khẩu mới" Style="{StaticResource FormLabel}"/>
                                        <PasswordBox Style="{StaticResource FormPassword}" Height="44" VerticalContentAlignment="Center" PasswordChar="•"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Nhập lại mật khẩu mới" Style="{StaticResource FormLabel}"/>
                                        <PasswordBox Style="{StaticResource FormPassword}" Height="44" VerticalContentAlignment="Center" PasswordChar="•"/>
                                    </StackPanel>
                                </Grid>

                                <StackPanel Margin="0,0,0,24">
                                    <TextBlock Text="Mật khẩu phải bao gồm:" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,8" Foreground="{StaticResource SecondaryText}"/>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                        <TextBlock Text="✓" Foreground="{StaticResource SuccessColor}" Margin="0,0,6,0"/>
                                        <TextBlock Text="Ít nhất 8 ký tự" Foreground="{StaticResource SecondaryText}" FontSize="13"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                        <TextBlock Text="○" Foreground="{StaticResource BorderColor}" Margin="0,0,6,0"/>
                                        <TextBlock Text="Ít nhất 1 chữ hoa và 1 chữ thường" Foreground="{StaticResource SecondaryText}" FontSize="13"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="○" Foreground="{StaticResource BorderColor}" Margin="0,0,6,0"/>
                                        <TextBlock Text="Ít nhất 1 số hoặc ký tự đặc biệt" Foreground="{StaticResource SecondaryText}" FontSize="13"/>
                                    </StackPanel>
                                </StackPanel>

                                <Button Content="Lưu mật khẩu mới" Style="{StaticResource BtnPrimary}" HorizontalAlignment="Right" IsEnabled="False"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <Grid Margin="0,0,0,16">
                                    <TextBlock Text="Xác thực 2 yếu tố (2FA)" Style="{StaticResource CardTitleStyle}" Margin="0"/>
                                    <Border Background="#f1f5f9" CornerRadius="20" HorizontalAlignment="Right" Padding="12,6">
                                        <TextBlock Text="Chưa kích hoạt" FontSize="12" FontWeight="SemiBold" Foreground="{StaticResource SecondaryText}"/>
                                    </Border>
                                </Grid>

                                <TextBlock Text="Tăng cường bảo mật cho tài khoản của bạn bằng cách yêu cầu mã xác thực thứ hai (gửi qua SMS hoặc ứng dụng Authenticator) khi đăng nhập." 
                                           Foreground="{StaticResource SecondaryText}" TextWrapping="Wrap" LineHeight="22" Margin="0,0,0,20"/>

                                <Button Content="Thiết lập 2FA" Style="{StaticResource BtnSecondary}" 
                                        BorderBrush="{StaticResource PrimaryColor}" Foreground="{StaticResource PrimaryColor}" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Thiết bị đang đăng nhập" Style="{StaticResource CardTitleStyle}"/>
                                <TextBlock Text="Đây là danh sách các thiết bị đã đăng nhập vào tài khoản của bạn gần đây. Nếu thấy thiết bị lạ, hãy đăng xuất ngay lập tức."
                                           Foreground="{StaticResource SecondaryText}" FontSize="13" Margin="0,0,0,20"/>

                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Width="48" Height="48" Background="#f1f5f9" CornerRadius="12" Grid.Column="0" Margin="0,0,16,0">
                                        <TextBlock Text="💻" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource PrimaryColor}"/>
                                    </Border>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock FontSize="15" FontWeight="SemiBold" Foreground="{StaticResource DarkText}">
                                            Chrome trên Windows <Run Text="Thiết bị này" Foreground="{StaticResource SuccessColor}" FontSize="12" FontWeight="Bold"/>
                                        </TextBlock>
                                        <TextBlock Text="TP. Hồ Chí Minh • Đang hoạt động" FontSize="13" Foreground="{StaticResource SecondaryText}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Grid>
                                <Rectangle Height="1" Fill="{StaticResource BorderColor}" Margin="0,0,0,16"/>

                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Width="48" Height="48" Background="#f1f5f9" CornerRadius="12" Grid.Column="0" Margin="0,0,16,0">
                                        <TextBlock Text="📱" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource SecondaryText}"/>
                                    </Border>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock Text="Ứng dụng Mobile trên iPhone 13" FontSize="15" FontWeight="SemiBold" Foreground="{StaticResource DarkText}"/>
                                        <TextBlock Text="Hà Nội • Hoạt động 2 giờ trước" FontSize="13" Foreground="{StaticResource SecondaryText}" Margin="0,2,0,0"/>
                                    </StackPanel>

                                    <Button Grid.Column="2" Content="Đăng xuất" Background="Transparent" BorderBrush="{StaticResource DangerColor}" BorderThickness="1"
                                            Foreground="{StaticResource DangerColor}" Padding="12,6" FontSize="13" FontWeight="SemiBold" Cursor="Hand">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>

                                <Button Content="Đăng xuất khỏi tất cả các thiết bị khác" Background="Transparent" BorderBrush="{StaticResource DangerColor}" BorderThickness="1"
                                        Foreground="{StaticResource DangerColor}" Padding="0,12" FontSize="14" FontWeight="SemiBold" Margin="0,16,0,0" Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#fef2f2"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Border>

                        <Border Background="{StaticResource DangerBg}" BorderBrush="#fca5a5" BorderThickness="1" CornerRadius="16" Padding="24">
                            <StackPanel>
                                <TextBlock Text="Vùng nguy hiểm" Style="{StaticResource CardTitleStyle}" Foreground="{StaticResource DangerColor}" Margin="0,0,0,12"/>
                                <Rectangle Height="1" Fill="#fca5a5" Margin="0,0,0,16"/>

                                <TextBlock Text="Việc vô hiệu hóa tài khoản sẽ ẩn hồ sơ của bạn. Việc xóa tài khoản là vĩnh viễn và không thể khôi phục dữ liệu sức khỏe."
                                           Foreground="{StaticResource SecondaryText}" Margin="0,0,0,20"/>

                                <StackPanel Orientation="Horizontal">
                                    <Button Content="Vô hiệu hóa tài khoản" Background="White" BorderBrush="{StaticResource DangerColor}" BorderThickness="1"
                                            Foreground="{StaticResource DangerColor}" Padding="16,10" FontWeight="SemiBold" Margin="0,0,16,0">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>

                                    <Button Content="Xóa tài khoản vĩnh viễn" Background="{StaticResource DangerColor}" 
                                            Foreground="White" Padding="16,10" FontWeight="SemiBold" BorderThickness="0">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Style="{StaticResource SettingsTabItem}">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <fa:ImageAwesome Icon="Bell" Width="16" Height="16" Margin="0,0,12,0" Foreground="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Foreground}"/>
                        <TextBlock Text="Thông báo"/>
                    </StackPanel>
                </TabItem.Header>
                <Grid>
                    <TextBlock Text="Cài đặt thông báo (Đang cập nhật...)" Foreground="{StaticResource SecondaryText}" 
                               HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,100,0,0" FontStyle="Italic"/>
                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</Page>