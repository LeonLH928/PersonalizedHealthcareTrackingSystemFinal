<Page x:Class="PersonalizedHealthcareTrackingSystemFinal.Views.PatientView.PatientSetting"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:fa="http://schemas.fontawesome.io/icons/"
      mc:Ignorable="d" 
      d:DesignHeight="1000" d:DesignWidth="1100"
      Title="PatientSetting"
      FontFamily="Segoe UI"
      Background="#F1F5F9">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="White" Padding="32" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,0,0,1">
            <TextBlock Text="Account Settings" FontSize="28" FontWeight="Bold" Foreground="{StaticResource DarkText}"/>
        </Border>

        <TabControl Grid.Row="1" TabStripPlacement="Left" Background="Transparent" BorderThickness="0" Margin="0,32,0,0" Padding="0">
            <TabControl.Resources>
                <Style TargetType="TabPanel">
                    <Setter Property="Margin" Value="32,0,40,0"/>
                    <Setter Property="Width" Value="240"/>
                </Style>
            </TabControl.Resources>

            <!-- TAB 1 -->
            <TabItem Style="{StaticResource SettingsTabItem}">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <fa:ImageAwesome Icon="User" Width="16" Height="16" Margin="0,0,12,0" Foreground="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Foreground}"/>
                        <TextBlock Text="General Information"/>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="0,0,32,32">
                    <StackPanel MaxWidth="800" HorizontalAlignment="Left">

                        <!-- Avatar -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Profile Picture" Style="{StaticResource CardTitleStyle}"/>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="80" Height="80" Stroke="White" StrokeThickness="3">
                                        <Ellipse.Fill>
                                            <SolidColorBrush Color="#cbd5e1"/>
                                        </Ellipse.Fill>
                                        <Ellipse.Effect>
                                            <DropShadowEffect BlurRadius="10" Opacity="0.1"/>
                                        </Ellipse.Effect>
                                    </Ellipse>

                                    <StackPanel Margin="24,0,0,0" VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                            <Button Content="📷 Upload new photo" Style="{StaticResource BtnSecondary}" Padding="16,8" FontSize="13" Margin="0,0,12,0"/>
                                            <Button Content="Remove current photo" Background="Transparent" Foreground="{StaticResource DangerColor}" BorderThickness="0" FontWeight="SemiBold" Cursor="Hand"/>
                                        </StackPanel>
                                        <TextBlock Text="Supports JPG, GIF, or PNG. Max size 2MB." FontSize="12" Foreground="{StaticResource SecondaryText}"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Personal info -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Personal And Medical Information" Style="{StaticResource CardTitleStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="20"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="20"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Grid.Column="0">
                                        <TextBlock Text="Middle And Last Name" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="Nguyen Van" Style="{StaticResource FormInput}" IsReadOnly="True" ToolTip="Contact support to update"/>
                                    </StackPanel>
                                    <StackPanel Grid.Row="0" Grid.Column="2">
                                        <TextBlock Text="First Name" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="A" Style="{StaticResource FormInput}" IsReadOnly="True"/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2" Grid.Column="0">
                                        <TextBlock Text="Date of Birth" Style="{StaticResource FormLabel}"/>
                                        <DatePicker SelectedDate="1978-10-26" Padding="4" BorderBrush="{StaticResource BorderColor}" VerticalContentAlignment="Center" Height="42">
                                            <DatePicker.Resources>
                                                <Style TargetType="DatePickerTextBox">
                                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                </Style>
                                            </DatePicker.Resources>
                                        </DatePicker>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2" Grid.Column="2">
                                        <TextBlock Text="Gender" Style="{StaticResource FormLabel}"/>
                                        <ComboBox SelectedIndex="0" Padding="12" BorderBrush="{StaticResource BorderColor}" Height="42" VerticalContentAlignment="Center">
                                            <ComboBoxItem Content="Male"/>
                                            <ComboBoxItem Content="Female"/>
                                            <ComboBoxItem Content="Other"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <StackPanel Grid.Row="4" Grid.Column="0">
                                        <TextBlock Text="Health Insurance ID" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="DN4790123456789" Style="{StaticResource FormInput}" IsReadOnly="True" FontFamily="Consolas" FontWeight="SemiBold"/>
                                        <TextBlock Text="This information is verified by the hospital." FontSize="12" Foreground="{StaticResource SecondaryText}" Margin="0,4,0,0"/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="4" Grid.Column="2">
                                        <TextBlock Text="Blood Type" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="A+" Style="{StaticResource FormInput}" IsReadOnly="True"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Contact info -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Contact Information" Style="{StaticResource CardTitleStyle}"/>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Phone Number (Login)" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="0901234567" Style="{StaticResource FormInput}" IsReadOnly="True"/>
                                        <TextBlock Text="Change verified phone number →" Foreground="{StaticResource PrimaryColor}" FontSize="13" Margin="0,6,0,0" Cursor="Hand" TextDecorations="Underline"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Email Address" Style="{StaticResource FormLabel}"/>
                                        <TextBox Text="nguyenva@email.com" Style="{StaticResource FormInput}"/>
                                    </StackPanel>
                                </Grid>

                                <StackPanel Margin="0,0,0,32">
                                    <TextBlock Text="Current Address" Style="{StaticResource FormLabel}"/>
                                    <TextBox Text="123 ABC Street, District 1, Ho Chi Minh City" Style="{StaticResource FormInput}"/>
                                </StackPanel>

                                <Border BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,0,0" Padding="0,24,0,0">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="Cancel" Style="{StaticResource BtnSecondary}" Margin="0,0,12,0"/>
                                        <Button Content="Save Changes" Style="{StaticResource BtnPrimary}"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- TAB 2: SECURITY -->
            <TabItem Style="{StaticResource SettingsTabItem}">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <fa:ImageAwesome Icon="Lock" Width="16" Height="16" Margin="0,0,12,0" Foreground="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Foreground}"/>
                        <TextBlock Text="Security And Login"/>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="0,0,32,32">
                    <StackPanel MaxWidth="800" HorizontalAlignment="Left">

                        <!-- Change Password -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Change Password" Style="{StaticResource CardTitleStyle}"/>

                                <StackPanel Margin="0,0,0,20">
                                    <TextBlock Text="Current Password" Style="{StaticResource FormLabel}"/>
                                    <Grid>
                                        <PasswordBox Style="{StaticResource FormPassword}" Height="44" VerticalContentAlignment="Center" PasswordChar="•"/>
                                        <TextBlock Text="👁️" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,12,0" Foreground="{StaticResource SecondaryText}" Cursor="Hand"/>
                                    </Grid>
                                </StackPanel>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="New Password" Style="{StaticResource FormLabel}"/>
                                        <PasswordBox Style="{StaticResource FormPassword}" Height="44" VerticalContentAlignment="Center" PasswordChar="•"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Re-enter New Password" Style="{StaticResource FormLabel}"/>
                                        <PasswordBox Style="{StaticResource FormPassword}" Height="44" VerticalContentAlignment="Center" PasswordChar="•"/>
                                    </StackPanel>
                                </Grid>

                                <StackPanel Margin="0,0,0,24">
                                    <TextBlock Text="Password must include:" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,8" Foreground="{StaticResource SecondaryText}"/>

                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                        <TextBlock Text="○" Foreground="{StaticResource BorderColor}" Margin="0,0,6,0"/>
                                        <TextBlock Text="At least 8 characters" Foreground="{StaticResource SecondaryText}" FontSize="13"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                        <TextBlock Text="○" Foreground="{StaticResource BorderColor}" Margin="0,0,6,0"/>
                                        <TextBlock Text="At least one uppercase and one lowercase letter" Foreground="{StaticResource SecondaryText}" FontSize="13"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="○" Foreground="{StaticResource BorderColor}" Margin="0,0,6,0"/>
                                        <TextBlock Text="At least one number or special character" Foreground="{StaticResource SecondaryText}" FontSize="13"/>
                                    </StackPanel>
                                </StackPanel>

                                <Button Content="Save New Password" Style="{StaticResource BtnPrimary}" HorizontalAlignment="Right" IsEnabled="False"/>
                            </StackPanel>
                        </Border>

                        <!-- 2FA -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <Grid Margin="0,0,0,16">
                                    <TextBlock Text="Two-Factor Authentication (2FA)" Style="{StaticResource CardTitleStyle}"/>
                                    <Border Background="#f1f5f9" CornerRadius="20" HorizontalAlignment="Right" Padding="12,6">
                                        <TextBlock Text="Not Activated" FontSize="12" FontWeight="SemiBold" Foreground="{StaticResource SecondaryText}"/>
                                    </Border>
                                </Grid>

                                <TextBlock Text="Enhance your account security by requiring a second verification code (sent via SMS or Authenticator app) when logging in." Foreground="{StaticResource SecondaryText}" TextWrapping="Wrap" LineHeight="22" Margin="0,0,0,20"/>

                                <Button Content="Set up 2FA" Style="{StaticResource BtnSecondary}" BorderBrush="{StaticResource PrimaryColor}" Foreground="{StaticResource PrimaryColor}" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </Border>

                        <!-- Logged in devices -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="Active Devices" Style="{StaticResource CardTitleStyle}"/>
                                <TextBlock Text="Below is a list of devices that recently logged into your account. If you see an unknown device, log out immediately." Foreground="{StaticResource SecondaryText}" FontSize="13" Margin="0,0,0,20"/>

                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Width="48" Height="48" Background="#f1f5f9" CornerRadius="12" Grid.Column="0" Margin="0,0,16,0">
                                        <TextBlock Text="💻" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource PrimaryColor}"/>
                                    </Border>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock FontSize="15" FontWeight="SemiBold" Foreground="{StaticResource DarkText}">
                                            Chrome on Windows <Run Text="This device" Foreground="{StaticResource SuccessColor}" FontSize="12" FontWeight="Bold"/>
                                        </TextBlock>
                                        <TextBlock Text="Ho Chi Minh City • Active now" FontSize="13" Foreground="{StaticResource SecondaryText}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Grid>

                                <Rectangle Height="1" Fill="{StaticResource BorderColor}" Margin="0,0,0,16"/>

                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Width="48" Height="48" Background="#f1f5f9" CornerRadius="12" Grid.Column="0" Margin="0,0,16,0">
                                        <TextBlock Text="📱" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource SecondaryText}"/>
                                    </Border>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock Text="Mobile App on iPhone 13" FontSize="15" FontWeight="SemiBold" Foreground="{StaticResource DarkText}"/>
                                        <TextBlock Text="Hanoi • Active 2 hours ago" FontSize="13" Foreground="{StaticResource SecondaryText}" Margin="0,2,0,0"/>
                                    </StackPanel>

                                    <Button Grid.Column="2" Content="Log out" Background="Transparent" BorderBrush="{StaticResource DangerColor}" BorderThickness="1" Foreground="{StaticResource DangerColor}" Padding="12,6" FontSize="13" FontWeight="SemiBold" Cursor="Hand">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>

                                <Button Content="Log out of all other devices" Background="Transparent" BorderBrush="{StaticResource DangerColor}" BorderThickness="1" Foreground="{StaticResource DangerColor}" Padding="0,12" FontSize="14" FontWeight="SemiBold" Margin="0,16,0,0" Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#fef2f2"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>

                            </StackPanel>
                        </Border>

                        <!-- Danger Zone -->
                        <Border Background="{StaticResource DangerBg}" BorderBrush="#fca5a5" BorderThickness="1" CornerRadius="16" Padding="24">
                            <StackPanel>
                                <TextBlock Text="Danger Zone" Style="{StaticResource CardTitleStyle}" Foreground="{StaticResource DangerColor}" Margin="0,0,0,12"/>
                                <Rectangle Height="1" Fill="#fca5a5" Margin="0,0,0,16"/>

                                <TextBlock Text="Disabling your account will hide your profile. Deleting your account is permanent and your health data cannot be recovered." Foreground="{StaticResource SecondaryText}" Margin="0,0,0,20"/>

                                <StackPanel Orientation="Horizontal">
                                    <Button Content="Disable Account" Background="White" BorderBrush="{StaticResource DangerColor}" BorderThickness="1" Foreground="{StaticResource DangerColor}" Padding="16,10" FontWeight="SemiBold" Margin="0,0,16,0">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>

                                    <Button Content="Delete Account Permanently" Background="{StaticResource DangerColor}" Foreground="White" Padding="16,10" FontWeight="SemiBold" BorderThickness="0">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- TAB 3 Notifications -->
            <TabItem Style="{StaticResource SettingsTabItem}">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <fa:ImageAwesome Icon="Bell" Width="16" Height="16" Margin="0,0,12,0" Foreground="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Foreground}"/>
                        <TextBlock Text="Notifications"/>
                    </StackPanel>
                </TabItem.Header>

                <Grid>
                    <TextBlock Text="Notification settings (Updating...)" Foreground="{StaticResource SecondaryText}" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,100,0,0" FontStyle="Italic"/>
                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</Page>